{"version":3,"sources":["webpack:///angular-drag.js","webpack:///webpack/bootstrap 874fdaf199a9198f8e96","webpack:///./src/index.js","webpack:///./src/lib/drag.js","webpack:///external \"angular\"","webpack:///external \"jQuery\""],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","Drag","angular","angularDrag","directive","restrict","link","scope","elem","dragNode","dragHandle","querySelector","hasAttribute","parentNode","on","START","event","preventDefault","noop","GPU","create","this","start","$","proxy","move","end","$window","window","$document","document","isTouch","html","documentElement","isIE6","style","isLosecapture","isSetCapture","eventTypes","touchId","getEvent","touches","originalEvent","supports","div","createElement","vendors","split","len","length","prop","replace","val","toUpperCase","transform","prototype","constructor","target","setCapture","onstart","onmove","off","releaseCapture","onend","x","y","minX","minY","maxX","maxY","startLeft","startTop","clientX","clientY","$elem","drag","dragEvent","$wrap","nodeName","offsetParent","isFixed","css","position","ww","width","wh","height","dl","scrollLeft","dt","scrollTop","dw","dh","w","outerWidth","h","outerHeight","l","left","t","top","Math","max","min","destroy","MOVE","END","jQuery"],"mappings":"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","file":"angular-drag.js","sourcesContent":["/*! angular-drag@0.0.1-beta | https://github.com/aui/angular-drag */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* global require */\n\t\n\t'use strict';\n\t\n\tvar Drag = __webpack_require__(1);\n\tvar angular = __webpack_require__(2);\n\t\n\tvar angularDrag = angular.module('angular-drag', []);\n\t\n\tangularDrag.directive('drag', function() {\n\t    return {\n\t        restrict: 'A',\n\t        link: function(scope, elem) {\n\t            var dragNode = elem[0];\n\t            var dragHandle = dragNode.querySelector('[drag-handle]');\n\t\n\t            if (!dragHandle) {\n\t                new Drag(dragNode);\n\t            }\n\t        }\n\t    };\n\t});\n\t\n\tangularDrag.directive('dragHandle', function() {\n\t    return {\n\t        restrict: 'A',\n\t        link: function(scope, elem) {\n\t            var dragNode = elem[0];\n\t\n\t            while (!dragNode.hasAttribute('drag')) {\n\t                dragNode = dragNode.parentNode;\n\t            }\n\t\n\t            elem.on(Drag.START, function(event) {\n\t                new Drag(dragNode, event);\n\t                event.preventDefault();\n\t            });\n\t        }\n\t    };\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* global require,module */\n\t'use strict';\n\t\n\tvar $ = __webpack_require__(3);\n\t\n\t\n\tvar $window = $(window);\n\tvar $document = $(document);\n\tvar isTouch = 'createTouch' in document;\n\tvar html = document.documentElement;\n\tvar isIE6 = !('minWidth' in html.style);\n\tvar isLosecapture = !isIE6 && 'onlosecapture' in html;\n\tvar isSetCapture = 'setCapture' in html;\n\t\n\tfunction noop() {}\n\t\n\tfunction preventDefault() {\n\t    return false;\n\t}\n\t\n\tvar eventTypes = {\n\t    start: isTouch ? 'touchstart' : 'mousedown',\n\t    move: isTouch ? 'touchmove' : 'mousemove',\n\t    end: isTouch ? 'touchend' : 'mouseup'\n\t};\n\t\n\tvar touchId = 0;\n\tvar getEvent = isTouch ? function(event, touchId) {\n\t    return (event.touches || event.originalEvent.touches)[touchId];\n\t} : function(event) {\n\t    return event;\n\t};\n\t\n\t\n\tvar supports = (function() {\n\t    var div = document.createElement('div');\n\t    var vendors = 'Khtml Ms O Moz Webkit'.split(' ');\n\t    var len = vendors.length;\n\t\n\t    return function(prop) {\n\t        if (prop in div.style) {\n\t            return prop;\n\t        }\n\t\n\t        prop = prop.replace(/^[a-z]/, function(val) {\n\t            return val.toUpperCase();\n\t        });\n\t\n\t        while (len--) {\n\t            if (vendors[len] + prop in div.style) {\n\t                return vendors[len] + prop;\n\t            }\n\t        }\n\t\n\t        return null;\n\t    };\n\t})();\n\t\n\t\n\tvar transform = supports('transform');\n\t\n\t\n\t\n\t/**\n\t * 拖拽事件类，解决浏览器兼容问题\n\t * @constructor\n\t */\n\tfunction Drag(elem, event, GPU) {\n\t\n\t    if (elem) {\n\t        return new Drag.create(elem, event, GPU);\n\t    }\n\t\n\t    this.start = $.proxy(this.start, this);\n\t    this.move = $.proxy(this.move, this);\n\t    this.end = $.proxy(this.end, this);\n\t}\n\t\n\tDrag.prototype = {\n\t\n\t    constructor: Drag,\n\t\n\t    start: function(event) {\n\t\n\t        this.touchId = touchId;\n\t        event = getEvent(event, touchId);\n\t        touchId++;\n\t\n\t        this.target = $(event.target);\n\t\n\t        $document\n\t            .on('selectstart', preventDefault)\n\t            .on('dblclick', this.end);\n\t\n\t        if (isLosecapture) {\n\t            this.target.on('losecapture', this.end);\n\t        } else {\n\t            $window.on('blur', this.end);\n\t        }\n\t\n\t        if (isSetCapture) {\n\t            this.target[0].setCapture();\n\t        }\n\t\n\t        $document\n\t            .on(eventTypes.move, this.move)\n\t            .on(eventTypes.end, this.end);\n\t\n\t        this.onstart(event);\n\t        return false;\n\t    },\n\t\n\t    move: function(event) {\n\t        event = getEvent(event, this.touchId);\n\t        this.onmove(event);\n\t        return false;\n\t    },\n\t\n\t    end: function(event) {\n\t        this.touchId = touchId;\n\t        event = getEvent(event, touchId);\n\t        touchId--;\n\t\n\t        $document\n\t            .off('selectstart', preventDefault)\n\t            .off('dblclick', this.end);\n\t\n\t        if (isLosecapture) {\n\t            this.target.off('losecapture', this.end);\n\t        } else {\n\t            $window.off('blur', this.end);\n\t        }\n\t\n\t        if (isSetCapture) {\n\t            this.target[0].releaseCapture();\n\t        }\n\t\n\t        $document\n\t            .off(eventTypes.move, this.move)\n\t            .off(eventTypes.end, this.end);\n\t\n\t        this.onend(event);\n\t        return false;\n\t    }\n\t\n\t};\n\t\n\t\n\t\n\t/**\n\t * @constructor\n\t * @param   {HTMLElement}   被拖拽的元素\n\t * @param   {Event}         触发拖拽的事件对象。若无则监听 elem 的按下事件启动\n\t */\n\t\n\tDrag.create = function(elem, event, GPU) {\n\t\n\t    var $elem = $(elem);\n\t    var drag = this;\n\t    var dragEvent = new Drag();\n\t\n\t    var x, y, minX, minY, maxX, maxY, startLeft, startTop, clientX, clientY;\n\t\n\t    if (typeof GPU === 'undefined') {\n\t        GPU = !!transform;\n\t    }\n\t\n\t    this.GPU = GPU;\n\t\n\t    dragEvent.onstart = function(event) {\n\t        var $wrap = elem.parentNode.nodeName === 'BODY' ?\n\t            $document : $elem.offsetParent();\n\t\n\t        var isFixed = $elem.css('position') === 'fixed';\n\t        var position = $elem.position();\n\t        var ww = $window.width();\n\t        var wh = $window.height();\n\t        var dl = $wrap.scrollLeft();\n\t        var dt = $wrap.scrollTop();\n\t        var dw = $wrap.width();\n\t        var dh = $wrap.height();\n\t        var w = $elem.outerWidth();\n\t        var h = $elem.outerHeight();\n\t        var l = position.left;\n\t        var t = position.top;\n\t\n\t        if (drag.GPU) {\n\t            minX = isFixed ? -l : -l - dl;\n\t            minY = isFixed ? -t : -t - dt;\n\t            maxX = isFixed ? ww - w - l : dw - w - l;\n\t            maxY = isFixed ? wh - h - t : dh - h - t;\n\t            x = 0;\n\t            y = 0;\n\t            startLeft = l;\n\t            startTop = t;\n\t        } else {\n\t            minX = 0;\n\t            minY = 0;\n\t            maxX = isFixed ? ww - w + minX : dw - w;\n\t            maxY = isFixed ? wh - h + minY : dh - h;\n\t            x = startLeft = l;\n\t            y = startTop = t;\n\t        }\n\t\n\t\n\t        clientX = event.clientX;\n\t        clientY = event.clientY;\n\t\n\t        drag.onstart(event);\n\t    };\n\t\n\t\n\t    dragEvent.onmove = function(event) {\n\t\n\t        var style = elem.style;\n\t\n\t        if (drag.GPU) {\n\t            x = event.clientX - clientX;\n\t            y = event.clientY - clientY;\n\t        } else {\n\t            x = event.clientX - clientX + startLeft;\n\t            y = event.clientY - clientY + startTop;\n\t        }\n\t\n\t        x = Math.max(minX, Math.min(maxX, x));\n\t        y = Math.max(minY, Math.min(maxY, y));\n\t\n\t\n\t        // 使用 GPU 加速\n\t        if (drag.GPU) {\n\t            style[transform] = 'translate3d(' + x + 'px, ' + y + 'px, 0px)';\n\t            // 使用传统的方式\n\t        } else {\n\t            style.left = x + 'px';\n\t            style.top = y + 'px';\n\t        }\n\t\n\t\n\t        drag.onmove(event);\n\t    };\n\t\n\t\n\t    dragEvent.onend = function(event) {\n\t        var style = elem.style;\n\t\n\t\n\t        if (drag.GPU) {\n\t            style[transform] = '';\n\t            style.left = x + startLeft + 'px';\n\t            style.top = y + startTop + 'px';\n\t        } else {\n\t            style.left = x + 'px';\n\t            style.top = y + 'px';\n\t        }\n\t\n\t        drag.onend(event);\n\t    };\n\t\n\t\n\t    if (event) {\n\t        // TODO onstart 事件此时可能还没注册\n\t        dragEvent.start(event);\n\t    } else {\n\t        $elem.on(Drag.START, dragEvent.start);\n\t        this.destroy = function() {\n\t            $elem.off(Drag.START, dragEvent.start);\n\t        };\n\t    }\n\t};\n\t\n\t\n\tDrag.START = eventTypes.start;\n\tDrag.MOVE = eventTypes.move;\n\tDrag.END = eventTypes.end;\n\t\n\t\n\tDrag.create.prototype = {\n\t    constructor: Drag.create,\n\t    onstart: noop,\n\t    onmove: noop,\n\t    onend: noop,\n\t    destroy: noop,\n\t};\n\t\n\tmodule.exports = Drag;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = angular;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = jQuery;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** angular-drag.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 874fdaf199a9198f8e96\n **/","/* global require */\n\n'use strict';\n\nvar Drag = require('./lib/drag');\nvar angular = require('angular');\n\nvar angularDrag = angular.module('angular-drag', []);\n\nangularDrag.directive('drag', function() {\n    return {\n        restrict: 'A',\n        link: function(scope, elem) {\n            var dragNode = elem[0];\n            var dragHandle = dragNode.querySelector('[drag-handle]');\n\n            if (!dragHandle) {\n                new Drag(dragNode);\n            }\n        }\n    };\n});\n\nangularDrag.directive('dragHandle', function() {\n    return {\n        restrict: 'A',\n        link: function(scope, elem) {\n            var dragNode = elem[0];\n\n            while (!dragNode.hasAttribute('drag')) {\n                dragNode = dragNode.parentNode;\n            }\n\n            elem.on(Drag.START, function(event) {\n                new Drag(dragNode, event);\n                event.preventDefault();\n            });\n        }\n    };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","/* global require,module */\n'use strict';\n\nvar $ = require('jquery');\n\n\nvar $window = $(window);\nvar $document = $(document);\nvar isTouch = 'createTouch' in document;\nvar html = document.documentElement;\nvar isIE6 = !('minWidth' in html.style);\nvar isLosecapture = !isIE6 && 'onlosecapture' in html;\nvar isSetCapture = 'setCapture' in html;\n\nfunction noop() {}\n\nfunction preventDefault() {\n    return false;\n}\n\nvar eventTypes = {\n    start: isTouch ? 'touchstart' : 'mousedown',\n    move: isTouch ? 'touchmove' : 'mousemove',\n    end: isTouch ? 'touchend' : 'mouseup'\n};\n\nvar touchId = 0;\nvar getEvent = isTouch ? function(event, touchId) {\n    return (event.touches || event.originalEvent.touches)[touchId];\n} : function(event) {\n    return event;\n};\n\n\nvar supports = (function() {\n    var div = document.createElement('div');\n    var vendors = 'Khtml Ms O Moz Webkit'.split(' ');\n    var len = vendors.length;\n\n    return function(prop) {\n        if (prop in div.style) {\n            return prop;\n        }\n\n        prop = prop.replace(/^[a-z]/, function(val) {\n            return val.toUpperCase();\n        });\n\n        while (len--) {\n            if (vendors[len] + prop in div.style) {\n                return vendors[len] + prop;\n            }\n        }\n\n        return null;\n    };\n})();\n\n\nvar transform = supports('transform');\n\n\n\n/**\n * 拖拽事件类，解决浏览器兼容问题\n * @constructor\n */\nfunction Drag(elem, event, GPU) {\n\n    if (elem) {\n        return new Drag.create(elem, event, GPU);\n    }\n\n    this.start = $.proxy(this.start, this);\n    this.move = $.proxy(this.move, this);\n    this.end = $.proxy(this.end, this);\n}\n\nDrag.prototype = {\n\n    constructor: Drag,\n\n    start: function(event) {\n\n        this.touchId = touchId;\n        event = getEvent(event, touchId);\n        touchId++;\n\n        this.target = $(event.target);\n\n        $document\n            .on('selectstart', preventDefault)\n            .on('dblclick', this.end);\n\n        if (isLosecapture) {\n            this.target.on('losecapture', this.end);\n        } else {\n            $window.on('blur', this.end);\n        }\n\n        if (isSetCapture) {\n            this.target[0].setCapture();\n        }\n\n        $document\n            .on(eventTypes.move, this.move)\n            .on(eventTypes.end, this.end);\n\n        this.onstart(event);\n        return false;\n    },\n\n    move: function(event) {\n        event = getEvent(event, this.touchId);\n        this.onmove(event);\n        return false;\n    },\n\n    end: function(event) {\n        this.touchId = touchId;\n        event = getEvent(event, touchId);\n        touchId--;\n\n        $document\n            .off('selectstart', preventDefault)\n            .off('dblclick', this.end);\n\n        if (isLosecapture) {\n            this.target.off('losecapture', this.end);\n        } else {\n            $window.off('blur', this.end);\n        }\n\n        if (isSetCapture) {\n            this.target[0].releaseCapture();\n        }\n\n        $document\n            .off(eventTypes.move, this.move)\n            .off(eventTypes.end, this.end);\n\n        this.onend(event);\n        return false;\n    }\n\n};\n\n\n\n/**\n * @constructor\n * @param   {HTMLElement}   被拖拽的元素\n * @param   {Event}         触发拖拽的事件对象。若无则监听 elem 的按下事件启动\n */\n\nDrag.create = function(elem, event, GPU) {\n\n    var $elem = $(elem);\n    var drag = this;\n    var dragEvent = new Drag();\n\n    var x, y, minX, minY, maxX, maxY, startLeft, startTop, clientX, clientY;\n\n    if (typeof GPU === 'undefined') {\n        GPU = !!transform;\n    }\n\n    this.GPU = GPU;\n\n    dragEvent.onstart = function(event) {\n        var $wrap = elem.parentNode.nodeName === 'BODY' ?\n            $document : $elem.offsetParent();\n\n        var isFixed = $elem.css('position') === 'fixed';\n        var position = $elem.position();\n        var ww = $window.width();\n        var wh = $window.height();\n        var dl = $wrap.scrollLeft();\n        var dt = $wrap.scrollTop();\n        var dw = $wrap.width();\n        var dh = $wrap.height();\n        var w = $elem.outerWidth();\n        var h = $elem.outerHeight();\n        var l = position.left;\n        var t = position.top;\n\n        if (drag.GPU) {\n            minX = isFixed ? -l : -l - dl;\n            minY = isFixed ? -t : -t - dt;\n            maxX = isFixed ? ww - w - l : dw - w - l;\n            maxY = isFixed ? wh - h - t : dh - h - t;\n            x = 0;\n            y = 0;\n            startLeft = l;\n            startTop = t;\n        } else {\n            minX = 0;\n            minY = 0;\n            maxX = isFixed ? ww - w + minX : dw - w;\n            maxY = isFixed ? wh - h + minY : dh - h;\n            x = startLeft = l;\n            y = startTop = t;\n        }\n\n\n        clientX = event.clientX;\n        clientY = event.clientY;\n\n        drag.onstart(event);\n    };\n\n\n    dragEvent.onmove = function(event) {\n\n        var style = elem.style;\n\n        if (drag.GPU) {\n            x = event.clientX - clientX;\n            y = event.clientY - clientY;\n        } else {\n            x = event.clientX - clientX + startLeft;\n            y = event.clientY - clientY + startTop;\n        }\n\n        x = Math.max(minX, Math.min(maxX, x));\n        y = Math.max(minY, Math.min(maxY, y));\n\n\n        // 使用 GPU 加速\n        if (drag.GPU) {\n            style[transform] = 'translate3d(' + x + 'px, ' + y + 'px, 0px)';\n            // 使用传统的方式\n        } else {\n            style.left = x + 'px';\n            style.top = y + 'px';\n        }\n\n\n        drag.onmove(event);\n    };\n\n\n    dragEvent.onend = function(event) {\n        var style = elem.style;\n\n\n        if (drag.GPU) {\n            style[transform] = '';\n            style.left = x + startLeft + 'px';\n            style.top = y + startTop + 'px';\n        } else {\n            style.left = x + 'px';\n            style.top = y + 'px';\n        }\n\n        drag.onend(event);\n    };\n\n\n    if (event) {\n        // TODO onstart 事件此时可能还没注册\n        dragEvent.start(event);\n    } else {\n        $elem.on(Drag.START, dragEvent.start);\n        this.destroy = function() {\n            $elem.off(Drag.START, dragEvent.start);\n        };\n    }\n};\n\n\nDrag.START = eventTypes.start;\nDrag.MOVE = eventTypes.move;\nDrag.END = eventTypes.end;\n\n\nDrag.create.prototype = {\n    constructor: Drag.create,\n    onstart: noop,\n    onmove: noop,\n    onend: noop,\n    destroy: noop,\n};\n\nmodule.exports = Drag;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/drag.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = angular;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"angular\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}